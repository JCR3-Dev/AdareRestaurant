<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mine Finding Game</title>
    <style>
      #grid {
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        grid-template-rows: repeat(10, 1fr);
      }
      .square {
        border: 1px solid black;
        width: 30px;
        height: 30px;
        text-align: center;
        line-height: 30px;
        font-size: 20px;
        cursor: pointer;
      }
      .square.flagged {
        background-color: yellow;
      }
      .mine {
        background-color: red;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="grid"></div>
    <script>
      const grid = document.getElementById('grid');
      const size = 10;
      const numMines = 10;
      let numFlags = 0;
      let numMinesRemaining = numMines;

      const generateGrid = () => {
        for (let i = 0; i < size; i++) {
          for (let j = 0; j < size; j++) {
            const square = document.createElement('div');
            square.classList.add('square');
            square.dataset.x = i;
            square.dataset.y = j;
            square.addEventListener('click', () => revealSquare(square));
            square.addEventListener('contextmenu', (event) => {
              event.preventDefault();
              toggleFlag(square);
            });
            grid.appendChild(square);
          }
        }
      };

      const placeMines = () => {
        const squares = grid.querySelectorAll('.square');
        const mines = new Set();
        while (mines.size < numMines) {
          const x = Math.floor(Math.random() * size);
          const y = Math.floor(Math.random() * size);
          mines.add(`${x},${y}`);
          squares[x * size + y].dataset.mine = true;
        }
      };

      const revealSquare = (square) => {
        if (square.classList.contains('flagged')) {
          return;
        }
        if (square.dataset.mine === 'true') {
          square.classList.add('mine');
          endGame(false);
        } else {
          const x = parseInt(square.dataset.x);
          const y = parseInt(square.dataset.y);
          const adjacentMines = countAdjacentMines(x, y);
          square.classList.add(`num-${adjacentMines}`);
          if (adjacentMines === 0) {
            revealAdjacentSquares(x, y);
          }
          checkWin();
        }
      };

      const countAdjacentMines = (x, y) => {
        let count = 0;
        for (let i = Math.max(x - 1, 0); i <= Math.min(x + 1, size - 1); i++) {
          for (let j = Math.max(y - 1, 0); j <= Math.min(y + 1, size - 1); j++) {
            if (grid.querySelector(`[data-x="${i}"][data-y="${j}"][data-mine="true"]`)) {
              count++;
            }
          }
        }
        return count;
      };

      const revealAdjacentSquares = (x, y) => {
        for (let i = Math.max(x - 1,
